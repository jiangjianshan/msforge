diff -urN lzip-1.24.1-orig/configure lzip-1.24.1/configure
--- lzip-1.24.1-orig/configure	2024-03-02 00:43:12.000000000 +0800
+++ lzip-1.24.1/configure	2025-11-11 18:07:07.328301400 +0800
@@ -152,8 +152,8 @@
   objs=$(sed -e :a -e '/\\$/N; s/\\\n//; ta' "${srcdir}/Makefile.in" | \
          sed -n -e 's/^ *objs *= *//p' | sed -e 's/ \{2,\}/ /g')
   for ofile in ${objs} ; do
-    file="${ofile%.o}.cc" ; pver=
-    [ "${ofile}" = main.o ] && pver=" -DPROGVERSION=\"${pkgversion}\""
+    file="${ofile%.obj}.cc" ; pver=
+    [ "${ofile}" = main.obj ] && pver=" -DPROGVERSION=\"${pkgversion}\""
     compile_command="${CXX} ${CPPFLAGS} ${CXXFLAGS}${pver} -c -o ${ofile}"
     echo "${compile_command} ${srcdir}/${file}"
     ${compile_command} "${srcdir}/${file}" || exit 1
diff -urN lzip-1.24.1-orig/main.cc lzip-1.24.1/main.cc
--- lzip-1.24.1-orig/main.cc	2024-02-06 23:04:00.000000000 +0800
+++ lzip-1.24.1/main.cc	2025-11-11 18:12:03.726989600 +0800
@@ -39,6 +39,62 @@
 #include <unistd.h>
 #include <utime.h>
 #include <sys/stat.h>
+
+#ifdef _MSC_VER
+#include <direct.h>
+#define fchmod(x,y) 0
+#define fchown(x,y,z) 0
+#define mkdir(name,mode) _mkdir(name)
+#define strtoull std::strtoul
+#define SIGHUP SIGTERM
+#define S_ISSOCK(x) 0
+
+typedef unsigned int mode_t;
+
+#define	_S_IFBLK	0x3000
+#define	_S_IRWXU	(_S_IREAD | _S_IWRITE | _S_IEXEC)
+#define	_S_IRUSR	_S_IREAD
+#define	_S_IXUSR	_S_IEXEC
+#define	_S_IWUSR	_S_IWRITE
+
+#define S_IFMT _S_IFMT
+#define S_IFDIR _S_IFDIR
+#define S_IFCHR _S_IFCHR
+#define S_IFREG _S_IFREG
+#define	S_IFIFO		_S_IFIFO
+#define	S_IFBLK		_S_IFBLK
+
+#define	S_IRWXU		_S_IRWXU
+#define	S_IXUSR		_S_IXUSR
+#define	S_IWUSR		_S_IWUSR
+#define	S_IRUSR		_S_IRUSR
+
+/* Windows doesn't have group permissions so set all these to zero. */
+#define	S_IRWXG		0	  /* rwx, group */
+#define	S_IRGRP	  0	  /* read permission, group */
+#define S_IWGRP	  0	  /* write permission, grougroup */
+#define	S_IXGRP	  0	  /* execute/search permission, group */
+
+/* Windows doesn't have others permissions so set all these to zero. */
+#define	S_IRWXO		0	  /* rwx, other */
+#define	S_IROTH	  0	  /* read permission, other */
+#define	S_IWOTH	  0	  /* write permission, other */
+#define	S_IXOTH	  0	  /* execute/search permission, other */
+
+#define O_RDONLY  _O_RDONLY
+#define O_WRONLY  _O_WRONLY
+#define O_CREAT   _O_CREAT
+#define O_TRUNC   _O_TRUNC
+#define O_BINARY  _O_BINARY
+#define O_EXCL    _O_EXCL
+#define S_ISFIFO(m)  (((m) & S_IFMT) == S_IFIFO)
+#define S_ISCHR(m)   (((m) & S_IFMT) == S_IFCHR)
+#define S_ISBLK(m)   (((m) & S_IFMT) == S_IFBLK)
+#define S_ISREG(m) (((m) & S_IFMT) == S_IFREG)
+#define S_ISDIR(mode)  (((mode) & S_IFMT) == S_IFDIR)
+
+#endif
+
 #if defined __MSVCRT__ || defined __OS2__ || defined __DJGPP__
 #include <io.h>
 #if defined __MSVCRT__
diff -urN lzip-1.24.1-orig/Makefile.in lzip-1.24.1/Makefile.in
--- lzip-1.24.1-orig/Makefile.in	2024-03-02 00:42:09.000000000 +0800
+++ lzip-1.24.1/Makefile.in	2025-11-11 18:07:07.339905300 +0800
@@ -7,8 +7,8 @@
 SHELL = /bin/sh
 CAN_RUN_INSTALLINFO = $(SHELL) -c "install-info --version" > /dev/null 2>&1
 
-objs = arg_parser.o lzip_index.o list.o encoder_base.o encoder.o \
-       fast_encoder.o decoder.o main.o
+objs = arg_parser.obj lzip_index.obj list.obj encoder_base.obj encoder.obj \
+       fast_encoder.obj decoder.obj main.obj
 
 
 .PHONY : all install install-bin install-info install-man \
@@ -22,21 +22,21 @@
 $(progname) : $(objs)
 	$(CXX) $(CXXFLAGS) $(LDFLAGS) -o $@ $(objs)
 
-main.o : main.cc
+main.obj : main.cc
 	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -DPROGVERSION=\"$(pkgversion)\" -c -o $@ $<
 
-%.o : %.cc
+%.obj : %.cc
 	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c -o $@ $<
 
 $(objs)        : Makefile
-arg_parser.o   : arg_parser.h
-decoder.o      : lzip.h decoder.h
-encoder_base.o : lzip.h encoder_base.h
-encoder.o      : lzip.h encoder_base.h encoder.h
-fast_encoder.o : lzip.h encoder_base.h fast_encoder.h
-list.o         : lzip.h lzip_index.h
-lzip_index.o   : lzip.h lzip_index.h
-main.o         : arg_parser.h lzip.h decoder.h encoder_base.h encoder.h fast_encoder.h
+arg_parser.obj   : arg_parser.h
+decoder.obj      : lzip.h decoder.h
+encoder_base.obj : lzip.h encoder_base.h
+encoder.obj      : lzip.h encoder_base.h encoder.h
+fast_encoder.obj : lzip.h encoder_base.h fast_encoder.h
+list.obj         : lzip.h lzip_index.h
+lzip_index.obj   : lzip.h lzip_index.h
+main.obj         : arg_parser.h lzip.h decoder.h encoder_base.h encoder.h fast_encoder.h
 
 doc : info man
 
